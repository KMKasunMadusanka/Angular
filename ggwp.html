<html ng-app="usertask">
<base href="/">

<head>
    <!--BOOTSTRAP CSS IMPORT-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!--CUSTOM CSS IMPORT-->
    <link rel="stylesheet" href="centroid-web/user-task-pages/dependency/css/custom.css">
    <!--ADD YOUR DEPENDENCIES (CSS)-->
    <!--Q JS IMPORT-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/q.js"></script>
    <!--JQUERY JS IMPORT-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/jquery-3.1.1.min.js"></script>
    <!--BOOTSTRAP JS IMPORT-->
    <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--ANGULAR JS IMPORT-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/angular.min.js"></script>
    <!--ADD YOUR DEPENDENCIES (JS)-->
    <!--DO NOT CHANGE OR DELETE-->
    <!--SPEED JS IMPORT-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/speedservices.js"></script>
    <!--DO NOT CHANGE OR DELETE-->
    <!--ANGULAR MODULE-->
    <script type="text/javascript">
        var usertask = angular.module('usertask', []);
    </script>
    <!--DO NOT CHANGE OR DELETE-->
    <!--ACCELLO CONFIG-->
    <script type="text/javascript" src="centroid-web//config.js"></script>
    <!--ANGULAR CONFIG-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/angular/config.js"></script>

    <script type="text/javascript" >

        function enableUpdateButtons() {
            document.getElementById("update").disabled = false;
            document.getElementById("add").disabled = true;
        }



        function enableAddButton() {
            document.getElementById("add").disabled = false;
            document.getElementById("update").disabled = true;
        }

    </script>

    <!--CUSTOM JS IMPORT-->
    <script type="text/javascript" src="centroid-web/user-task-pages/dependency/js/custom.js"></script>
    <!--DO NOT CHANGE OR DELETE-->
    <!--ANGULAR CONTROLLER-->
    <script type="text/javascript">
        usertask.controller('UserTaskController', function($scope, $accello) { /*------------------- DO NOT CHANGE OR DELETE -------------------*/
            $scope.inputParam = {};
            $scope.inputs = [];
            $scope._init = function() {
                $accello._init().then(function(data) {
                    $scope.inputParam = data._input;
                    $scope.inputParam['LawyerDetails'] = JSON.parse($scope.inputParam['LawyerDetails']);
                    $scope.lawyers=$scope.inputParam['LawyerDetails'];
                    console.log($scope.inputParam);
                }, function(err) {
                    console.error(err);
                });
            };
            $scope._save = function() {
                $scope.inputs[0] = JSON.stringify($scope.lawyers);
                $accello._save($scope.inputs);
            }; /*------------------- DO NOT CHANGE OR DELETE -------------------*/ /*---------- ADD YOUR CONTROLLER CODE HERE ------------*/



            //Add lawyer to the table
            $scope.buttonStatus = false;
            $scope.TempObj={};
            $scope.EditedData={};

            $scope.AddLawyers=function () {

                if($scope.LawyerDetails.ProductType1 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null &&  $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":Date.now(),
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Cards",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"New Record",
                        "id":$scope.lawyers.length+1
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }

                if($scope.LawyerDetails.ProductType2 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":Date.now(),
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Housing_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"New Record",
                        "id":$scope.lawyers.length+1
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }

                if($scope.LawyerDetails.ProductType3 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":Date.now(),
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Personal_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"New Record",
                        "id":$scope.lawyers.length+1
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                if($scope.LawyerDetails.ProductType4 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":Date.now(),
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Auto_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"New Record",
                        "id":$scope.lawyers.length+1
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                if($scope.LawyerDetails.ProductType5 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":Date.now(),
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Branch_Credit",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"New Record",
                        "id":$scope.lawyers.length+1
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                $scope.LawyerDetails={};
                // $scope.LawyerDetails.refreshItems();


            }

            $scope.clearData=function () {
                $scope.LawyerDetails={};
            }

            //Delete lawyer from the table
            $scope.DeleteData = function (val) {

                val.Status="Pending Approval";
                val.ActionType= "Delete Record";
                console.log( val);
                //val.ActionType = "Delete Record";
                //$scope.lawyers.splice($scope.lawyers.indexOf(val),1);
            }


            //Edit data
            $scope.EditData = function (val) {
                //assign previous data before editing
                $scope.EditedData = val;

                $scope.LawyerDetails = {};
                $scope.LawyerDetails.Name = val.Name;
                $scope.LawyerDetails.Telephone = val.Telephone;
                $scope.LawyerDetails.Availability = val.Availability;

                console.log(val.ProductType);

                if(val.ProductType=="Cards"){
                    $scope.LawyerDetails.ProductType1 = true;
                }
                if(val.ProductType=="Housing_Loans"){
                    $scope.LawyerDetails.ProductType2 = true;
                }
                if(val.ProductType=="Personal_Loans"){
                    $scope.LawyerDetails.ProductType3 = true;
                }
                if(val.ProductType=="Auto_Loans"){
                    $scope.LawyerDetails.ProductType4 = true;
                }
                if(val.ProductType=="Branch_Credit"){
                    $scope.LawyerDetails.ProductType5 = true;
                }

//                $scope.LawyerDetails.ProductType=[val.ProductType];
                console.log($scope.LawyerDetails);
            }

            //Update the table
            $scope.UpdateTable=function () {
//
//            if($scope.LawyerDetails.Name!=undefined){
//                $scope.lawyers.splice($scope.lawyers.indexOf($scope.EditedData),1);
//            }



                if($scope.LawyerDetails.ProductType1 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":$scope.EditedData.No,
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Cards",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"Updated Record"
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }

                if($scope.LawyerDetails.ProductType2 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":$scope.EditedData.No,
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Housing_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"Updated Record"
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }

                if($scope.LawyerDetails.ProductType3 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":$scope.EditedData.No,
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Personal_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"Updated Record"
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                if($scope.LawyerDetails.ProductType4 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":$scope.EditedData.No,
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Auto_Loans",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"Updated Record"
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                if($scope.LawyerDetails.ProductType5 && $scope.LawyerDetails.Name!=null && $scope.LawyerDetails.Telephone!=null  && $scope.LawyerDetails.Availability!=null){

                    $scope.TempObj={
                        "No":$scope.EditedData.No,
                        "Name":$scope.LawyerDetails.Name,
                        "Availability":$scope.LawyerDetails.Availability,
                        "ProductType": "Branch_Credit",
                        "Telephone":$scope.LawyerDetails.Telephone,
                        "Status":"Pending Approval",
                        "ActionType":"Updated Record"
                    };
                    console.log( $scope.TempObj);
                    $scope.lawyers.push($scope.TempObj);
                }
                $scope.LawyerDetails={};
                // $scope.LawyerDetails.refreshItems();
                console.log($scope.lawyers);
            }


            //print the final output
            console.log($scope.lawyers);


        });
    </script>




</head>

<body ng-controller="UserTaskController" ng-init="_init()">
<div class="container">

    <div class="page-header">
        <h2 class="text-info">Lawyer Details Management</h2>
    </div>
    <div class="well well-lg">
        <div class="container-fluid">
            <h3><strong>Add or edit lawyer details</strong></h3>
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label>Name</label>
                            <input class="form-control" ng-model="LawyerDetails.Name">
                        </div>
                    </div>


                    <div class="col-md-6" >
                        <div class="form-group">
                            <label>Telephone</label>
                            <input class="form-control" ng-model="LawyerDetails.Telephone">
                        </div>
                    </div>
                    <div class="col-md-6">


                        <div class="form-group">

                            <div >
                                <label style="margin-right: 5%">Availability</label>
                                <label class="radio-inline"><input type="radio" value="Yes" name="availability" ng-model="LawyerDetails.Availability">Yes</label>
                                <label class="radio-inline"><input type="radio" value="No" name="availability" ng-model="LawyerDetails.Availability">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">

                            <label>Product Type</label><br>


                            <div class="checkbox">
                                <label class="checkbox-inline "><input type="checkbox" value="Yes" name="Cards" ng-model="LawyerDetails.ProductType1">Cards</label><br>
                                <label class="checkbox-inline "><input type="checkbox" value="Yes" name="Housing_Loans" ng-model="LawyerDetails.ProductType2">Housing_Loans</label><br>
                                <label class="checkbox-inline "><input type="checkbox" value="Yes" name="Personal_Loans" ng-model="LawyerDetails.ProductType3">Personal_Loans</label><br>
                                <label class="checkbox-inline "><input type="checkbox" value="Yes" name="Auto_Loans" ng-model="LawyerDetails.ProductType4">Auto_Loans</label><br>
                                <label class="checkbox-inline"><input type="checkbox" value="Yes" name="Branch_Credit" ng-model="LawyerDetails.ProductType5">Branch_Credit</label>
                            </div>

                        </div>


                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group pull-right">
                        <button class="btn btn-success" id="add" ng-click="AddLawyers()" >Add</button>
                        <button class="btn btn-warning" id="update" ng-click="UpdateTable()" onclick="enableAddButton()"  disabled>Update</button>
                        <button class="btn btn-warning" id="clear" ng-click="clearData()" onclick="enableAddButton()"  >Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="page-header">
        <h3> <strong>View lawyer details</strong></h3>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-bordered table-hover" id="data-table">

                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Product Type</th>
                        <th>Availability</th>
                        <th>Phone Number</th>
                        <th class="text-center">Action</th>
                    </tr>



                    <tr ng-repeat="lawyer in lawyers | filter: { Status: 'Approved' }">
                        <td>{{lawyer.No}}</td>
                        <td>{{lawyer.Name}}</td>
                        <td>{{lawyer.ProductType}}</td>
                        <td>{{lawyer.Availability}}</td>
                        <td>{{lawyer.Telephone}}</td>
                        <td class="text-center">
                            <button  class="btn btn-warning btn-sm" ng-click="EditData(lawyer)" onclick="enableUpdateButtons()" >Edit <span class="glyphicon glyphicon-pencil"></span></button>
                            <button  class="btn btn-danger btn-sm" ng-click="DeleteData(lawyer)">Delete <span class="glyphicon glyphicon-trash"></span></button>
                        </td>
                    </tr>


                </table>
            </div>
        </div>
    </div>
    <div class="page-header">
        <h3> <strong>Pendding Approvals</strong></h3>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-bordered table-hover">

                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Product Type</th>
                        <th>Availability</th>
                        <th>Phone Number</th>
                        <th>Action Type</th>
                    </tr>



                    <tr ng-repeat="lawyer in lawyers | filter: { Status: 'Pending Approval' } ">
                        <td>{{lawyer.No}}</td>
                        <td>{{lawyer.Name}}</td>
                        <td>{{lawyer.ProductType}}</td>
                        <td>{{lawyer.Availability}}</td>
                        <td>{{lawyer.Telephone}}</td>
                        <td>{{lawyer.ActionType}}</td>
                    </tr>


                </table>
            </div>
        </div>
    </div>
</div>
<div style="left: 0px; bottom: 0px; height: 60px; width: 100%; background: #D0D0D0; padding: 15px; display: table;">
    <div style="font-size: 15px; font-weight: bold; color: #3e4eb8;">Accello Usertask Template</div>
    <div style="font-size: 12px; font-style: italic;">© Virtusa | Polaris</div>
    <div style="display: table-cell; vertical-align: middle;">
        <div style="position: absolute; width: 20%;"><span id="usertaskMsgHeaderSpan" style="font-weight: bold;"></span><span id="usertaskMsgContentSpan" style="word-wrap: break-word; font-size: 11px; letter-spacing: 0.5px;"></span></div>
        <button style="vertical-align: middle; display: block; width: 40%; margin: 0 auto; padding: 5px 10px; border-radius: 5px; background: #3E4EB8; color: #fff; outline: none; float: right;" type="button" ng-click="_save()">Perform Task</button></div>
</div>
</body>

</html>